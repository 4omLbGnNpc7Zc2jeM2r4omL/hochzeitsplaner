{% extends "guest_base.html" %}

{% block title %}Geschenkliste{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm geschenkliste-info-card">
                <div class="card-header geschenkliste-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h1 class="page-title mb-0" style="color: #8b7355;" id="geschenkliste-titel">üéÅ Unsere Geschenkliste</h1>
                        <button class="geschenkliste-toggle" 
                                data-bs-toggle="collapse" data-bs-target="#geschenkliste-info" 
                                aria-expanded="true" aria-controls="geschenkliste-info"
                                id="toggle-geschenkliste-info">
                            <i class="bi bi-chevron-up" id="toggle-icon"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body text-center collapse show" id="geschenkliste-info">
                    <p class="text-muted mb-0" id="geschenkliste-beschreibung">W√§hlen Sie ein Geschenk aus, das Ihnen gef√§llt</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Meine ausgew√§hlten Geschenke -->
    <div class="row mb-4" id="meine-geschenke-section" style="display: none;">
        <div class="col-12">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">‚úÖ Ihre ausgew√§hlten Geschenke</h5>
                </div>
                <div class="card-body" id="meine-geschenke-liste">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
        </div>
    </div>

    <!-- Filter -->
    <div class="row mb-3">
        <div class="col-md-4">
            <select class="form-select" id="kategorie-filter">
                <option value="">Alle Kategorien</option>
                <option value="Haushalt">Haushalt</option>
                <option value="K√ºche">K√ºche</option>
                <option value="Dekoration">Dekoration</option>
                <option value="Geld">Geldgeschenke</option>
                <option value="Sonstiges">Sonstiges</option>
            </select>
        </div>
        <div class="col-md-4">
            <select class="form-select" id="preis-filter">
                <option value="">Alle Preisklassen</option>
                <option value="0-25">bis 25 ‚Ç¨</option>
                <option value="25-50">25 - 50 ‚Ç¨</option>
                <option value="50-100">50 - 100 ‚Ç¨</option>
                <option value="100-200">100 - 200 ‚Ç¨</option>
                <option value="200+">√ºber 200 ‚Ç¨</option>
            </select>
        </div>
        <div class="col-md-4">
            <input type="text" class="form-control" id="search-input" placeholder="üîç Geschenke suchen...">
        </div>
    </div>

    <!-- Geschenke Grid -->
    <div class="row" id="geschenke-grid">
        <!-- Wird dynamisch gef√ºllt -->
    </div>
</div>

<!-- Auswahl Modal -->
<div class="modal fade" id="auswahlModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="auswahl-title">Geschenk ausw√§hlen</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="auswahl-content">
                <!-- Wird dynamisch gef√ºllt -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                <button type="button" class="btn btn-success" id="bestaetigen-btn">
                    <i class="fas fa-check"></i> Ausw√§hlen
                </button>
            </div>
        </div>
    </div>
</div>

<!-- PayPal Modal -->
<div class="modal fade" id="paypalModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">üí∞ Geldgeschenk via PayPal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <p>Sie k√∂nnen Ihr Geldgeschenk bequem √ºber PayPal senden:</p>
                <div class="my-3">
                    <a href="#" id="paypal-link" class="btn btn-primary btn-lg" target="_blank">
                        <i class="fab fa-paypal"></i> Zu PayPal
                    </a>
                </div>
                <p class="text-muted small">Sie werden zu PayPal weitergeleitet</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Schlie√üen</button>
                <button type="button" class="btn btn-success" id="geld-bestaetigen-btn">
                    ‚úÖ Geldgeschenk ausgew√§hlt
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Freigabe Best√§tigungs-Modal im Wedding-Theme -->
<div class="modal fade" id="freigabeModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);">
            <div class="modal-header border-0 text-center">
                <div class="w-100">
                    <h4 class="modal-title mb-0" style="color: #2d3436; font-family: 'Dancing Script', cursive; font-size: 2rem;">
                        üíù Geschenk freigeben?
                    </h4>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" style="filter: invert(1);"></button>
            </div>
            <div class="modal-body text-center px-4 py-3">
                <div class="mb-3">
                    <i class="fas fa-gift fa-3x" style="color: #e17055;"></i>
                </div>
                <p class="lead mb-2" style="color: #2d3436; font-weight: 500;">
                    Sind Sie sicher, dass Sie dieses Geschenk wieder freigeben m√∂chten?
                </p>
                <p class="text-muted mb-0 small">
                    Das Geschenk wird wieder f√ºr andere G√§ste verf√ºgbar.
                </p>
            </div>
            <div class="modal-footer border-0 justify-content-center gap-3">
                <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Abbrechen
                </button>
                <button type="button" class="btn px-4" id="freigabe-bestaetigen-btn" 
                        style="background: linear-gradient(45deg, #e17055, #fd79a8); border: none; color: white;">
                    <i class="fas fa-check me-2"></i>Ja, freigeben
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    const GAST_ID = {{ gast_id | tojson }};
</script>
<script src="{{ url_for('static', filename='js/guest_geschenkliste.js') }}"></script>
{% endblock %}
