{% extends "base.html" %}

{% block title %}Einstellungen - {{ brautpaar_namen or "Brautpaar heiratet" }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">Einstellungen</h1>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>Allgemeine Einstellungen</h5>
            </div>
            <div class="card-body">
                <form id="settingsForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="brautName" class="form-label">Name der Braut</label>
                                <input type="text" class="form-control" id="brautName" placeholder="K√§the">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="braeutigamName" class="form-label">Name des Br√§utigams</label>
                                <input type="text" class="form-control" id="braeutigamName" placeholder="Pascal">
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hochzeitsdatum" class="form-label">Hochzeitsdatum</label>
                                <input type="date" class="form-control" id="hochzeitsdatum">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Locations Section -->
                    <div class="row">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">
                                <i class="bi bi-geo-alt me-2"></i>
                                Locations
                            </h6>
                        </div>
                    </div>
                    
                    <!-- Standesamt -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">
                                        <i class="bi bi-building me-2"></i>
                                        Standesamt
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="standesamtName" class="form-label">Name</label>
                                                <input type="text" class="form-control" id="standesamtName" placeholder="Standesamt Aachen">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="standesamtAdresse" class="form-label">Adresse</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="standesamtAdresse" placeholder="Rathaus, Markt 39, 52062 Aachen">
                                                    <button class="btn btn-outline-primary" type="button" onclick="showLocationOnMap('standesamt', 'standesamtAdresse')" title="Kartenvorschau anzeigen">
                                                        <i class="bi bi-geo-alt-fill"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="standesamtBeschreibung" class="form-label">Beschreibung</label>
                                        <textarea class="form-control" id="standesamtBeschreibung" rows="2" placeholder="Hier findet die standesamtliche Trauung statt"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hochzeitslocation -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">
                                        <i class="bi bi-heart-fill me-2"></i>
                                        Hochzeitslocation
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="hochzeitslocationName" class="form-label">Name</label>
                                                <input type="text" class="form-control" id="hochzeitslocationName" placeholder="Hotel Kastanienhof">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="hochzeitslocationAdresse" class="form-label">Adresse</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="hochzeitslocationAdresse" placeholder="Kastanienallee 15, 52074 Aachen">
                                                    <button class="btn btn-outline-primary" type="button" onclick="showLocationOnMap('hochzeitslocation', 'hochzeitslocationAdresse')" title="Kartenvorschau anzeigen">
                                                        <i class="bi bi-geo-alt-fill"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="hochzeitslocationBeschreibung" class="form-label">Beschreibung</label>
                                        <textarea class="form-control" id="hochzeitslocationBeschreibung" rows="2" placeholder="Hier feiern wir unsere Hochzeit"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Kartenvorschauen nebeneinander (nur in der linken Spalte) -->
                    <div class="row" id="mapPreviewsSection">
                        <div class="col-12">
                            <h6 class="text-success mb-3">
                                <i class="bi bi-map me-2"></i>
                                Kartenvorschauen (OpenStreetMap)
                            </h6>
                        </div>
                        
                        <div class="col-md-12">
                            <!-- Standesamt Kartenvorschau -->
                            <div class="mb-3">
                                <div class="card" id="standesamtMapPreview">
                                    <div class="card-header d-flex justify-content-between align-items-center py-1">
                                        <small class="fw-bold text-muted">Standesamt</small>
                                        <button type="button" class="btn btn-sm btn-outline-secondary py-0 px-1" onclick="hideMapPreview('standesamt')" title="Vorschau schlie√üen">
                                            <i class="bi bi-x"></i>
                                        </button>
                                    </div>
                                    <div class="card-body p-0">
                                        <div style="height: 200px; width: 100%; position: relative; overflow: hidden;">
                                            <div id="standesamtMap" style="height: 100%; width: 100%; position: absolute; top: 0; left: 0;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Hochzeitslocation Kartenvorschau -->
                            <div class="mb-3">
                                <div class="card" id="hochzeitslocationMapPreview">
                                    <div class="card-header d-flex justify-content-between align-items-center py-1">
                                        <small class="fw-bold text-muted">Hochzeitslocation</small>
                                        <button type="button" class="btn btn-sm btn-outline-secondary py-0 px-1" onclick="hideMapPreview('hochzeitslocation')" title="Vorschau schlie√üen">
                                            <i class="bi bi-x"></i>
                                        </button>
                                    </div>
                                    <div class="card-body p-0">
                                        <div style="height: 200px; width: 100%; position: relative; overflow: hidden;">
                                            <div id="hochzeitslocationMap" style="height: 100%; width: 100%; position: absolute; top: 0; left: 0;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- First Login Modal Configuration -->
                    <div class="row">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">
                                <i class="bi bi-person-check me-2"></i>
                                G√§ste Willkommensnachricht
                            </h6>
                            
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">
                                        <i class="bi bi-card-text me-2"></i>
                                        Willkommensnachricht (wird beim ersten Login angezeigt)
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <!-- Bild Upload/URL Eingabe -->
                                            <div class="mb-3">
                                                <label class="form-label">Willkommensbild</label>
                                                
                                                <!-- Tab Navigation -->
                                                <ul class="nav nav-tabs nav-fill mb-3" id="imageInputTabs" role="tablist">
                                                    <li class="nav-item" role="presentation">
                                                        <button class="nav-link active" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload-pane" type="button" role="tab">
                                                            <i class="bi bi-upload me-1"></i>Upload
                                                        </button>
                                                    </li>
                                                    <li class="nav-item" role="presentation">
                                                        <button class="nav-link" id="url-tab" data-bs-toggle="tab" data-bs-target="#url-pane" type="button" role="tab">
                                                            <i class="bi bi-link-45deg me-1"></i>URL
                                                        </button>
                                                    </li>
                                                </ul>
                                                
                                                <!-- Tab Content -->
                                                <div class="tab-content" id="imageInputTabContent">
                                                    <!-- Upload Tab -->
                                                    <div class="tab-pane fade show active" id="upload-pane" role="tabpanel">
                                                        <div class="mb-3">
                                                            <input type="file" class="form-control" id="firstLoginImageFile" accept="image/*">
                                                            <div class="form-text">JPG, PNG oder GIF (max. 5MB)</div>
                                                        </div>
                                                        <div class="d-flex gap-2">
                                                            <button type="button" class="btn btn-outline-secondary btn-sm" id="convertToBlackWhite" style="display: none;">
                                                                <i class="bi bi-palette me-1"></i>Zu Schwarz-Wei√ü
                                                            </button>
                                                            <button type="button" class="btn btn-outline-danger btn-sm" id="clearUploadedImage" style="display: none;">
                                                                <i class="bi bi-trash me-1"></i>Bild l√∂schen
                                                            </button>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- URL Tab -->
                                                    <div class="tab-pane fade" id="url-pane" role="tabpanel">
                                                        <div class="mb-3">
                                                            <input type="url" class="form-control" id="firstLoginImage" placeholder="https://example.com/hochzeitsbild.jpg">
                                                            <div class="form-text">URL zu einem Bild, das im Willkommens-Modal angezeigt wird</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- Hidden field f√ºr Base64 Daten -->
                                                <input type="hidden" id="firstLoginImageData" name="firstLoginImageData">
                                            </div>
                                            
                                            <!-- Bild-Vorschau -->
                                            <div class="mb-3">
                                                <label class="form-label">Bildvorschau</label>
                                                <div class="border rounded p-3 text-center bg-light" style="min-height: 150px;">
                                                    <img id="firstLoginImagePreview" src="" alt="Bildvorschau" style="max-width: 100%; max-height: 140px; display: none;" class="rounded">
                                                    <div id="firstLoginImagePlaceholder" class="text-muted">
                                                        <i class="bi bi-image" style="font-size: 2rem;"></i>
                                                        <br>Keine Bildvorschau verf√ºgbar
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="firstLoginText" class="form-label">Willkommenstext</label>
                                                <textarea class="form-control" id="firstLoginText" rows="8" placeholder="Liebe G√§ste,&#10;&#10;herzlich willkommen auf unserer Hochzeitswebseite!&#10;&#10;Hier findet ihr alle wichtigen Informationen zu unserem besonderen Tag..."></textarea>
                                                <div class="form-text">Dieser Text wird neben dem Bild im Willkommens-Modal angezeigt</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="alert alert-info">
                                                <i class="bi bi-info-circle me-2"></i>
                                                <strong>Hinweis:</strong> Dieses Modal wird nur beim ersten Login eines Gastes angezeigt. Danach k√∂nnen G√§ste die Informationen √ºber den Bereich "Informationen" einsehen.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Modal Vorschau und Reset-Funktionen -->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <button type="button" class="btn btn-outline-primary w-100" id="previewFirstLoginModal">
                                                <i class="bi bi-eye me-2"></i>
                                                Vorschau anzeigen
                                            </button>
                                        </div>
                                        <div class="col-md-6">
                                            <button type="button" class="btn btn-outline-warning w-100" id="resetFirstLoginForAllGuests">
                                                <i class="bi bi-arrow-clockwise me-2"></i>
                                                First-Login f√ºr alle zur√ºcksetzen
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Personalisierte Einladungstexte Configuration -->
                    <div class="row">
                        <div class="col-12">
                            <h6 class="text-warning mb-3">
                                <i class="bi bi-envelope-heart me-2"></i>
                                Personalisierte Einladungstexte
                            </h6>
                            
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">
                                        <i class="bi bi-person me-2"></i>
                                        Individuell konfigurierbare Einladungsnachrichten
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-info mb-4">
                                        <i class="bi bi-info-circle me-2"></i>
                                        <strong>Hinweis:</strong> Diese Texte ersetzen die hart programmierten Einladungsnachrichten und werden dynamisch basierend auf der Anzahl der G√§ste verwendet.
                                    </div>
                                    
                                    <!-- Markdown-Formatierung Info -->
                                    <div class="alert alert-success mb-4">
                                        <i class="bi bi-brush me-2"></i>
                                        <strong>Neu: Textformatierung!</strong> Sie k√∂nnen jetzt <code>**Text**</code> verwenden um <strong>fetten Text</strong> zu erstellen.<br>
                                        <small>Beispiel: <code>**wichtige Information**</code> wird zu <strong>wichtige Information</strong></small>
                                    </div>
                                    
                                    <!-- Template-Variablen Hilfe -->
                                    <div class="row mb-4">
                                        <div class="col-12">
                                            <div class="card border-secondary">
                                                <div class="card-header bg-secondary text-white">
                                                    <h6 class="mb-0">
                                                        <i class="bi bi-code me-2"></i>
                                                        Verf√ºgbare Template-Variablen
                                                    </h6>
                                                </div>
                                                <div class="card-body">
                                                    <small>
                                                        <strong>{{wedding_date}}</strong> = Hochzeitsdatum (z.B. "25.07.2026")<br>
                                                        <strong>{{guest_name}}</strong> = Name des/der G√§ste (automatisch eingef√ºgt)<br>
                                                        <strong>{{event_parts}}</strong> = Dynamische Event-Teile (Trauung, Essen, Party)<br>
                                                        <strong>{{special_notes}}</strong> = Spezielle Hinweise (z.B. Wei√üer Saal Pl√§tze)
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <!-- Singular Text (Einzelperson) -->
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="invitationTextSingular" class="form-label">
                                                    <i class="bi bi-person me-1"></i>
                                                    Einladungstext f√ºr Einzelpersonen
                                                </label>
                                                <textarea class="form-control" id="invitationTextSingular" rows="12" 
                                                    placeholder="üíçüíç&#10;üíï Pers√∂nliche Einladung üíí&#10;Hallo {{guest_name}},&#10;&#10;du geh√∂rst zu den Menschen, die uns am wichtigsten sind - deshalb laden wir dich zu unserem kompletten Hochzeitstag am {{wedding_date}} ein:&#10;&#10;{{event_parts}}&#10;&#10;{{special_notes}}"></textarea>
                                                <div class="form-text">Text f√ºr G√§ste mit nur einer Person (du/dich/dir)</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Plural Text (Mehrere Personen) -->
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="invitationTextPlural" class="form-label">
                                                    <i class="bi bi-people me-1"></i>
                                                    Einladungstext f√ºr Gruppen
                                                </label>
                                                <textarea class="form-control" id="invitationTextPlural" rows="12" 
                                                    placeholder="üíçüíç&#10;üíï Pers√∂nliche Einladung üíí&#10;Hallo {{guest_name}},&#10;&#10;ihr geh√∂rt zu den Menschen, die uns am wichtigsten sind - deshalb laden wir euch zu unserem kompletten Hochzeitstag am {{wedding_date}} ein:&#10;&#10;{{event_parts}}&#10;&#10;{{special_notes}}"></textarea>
                                                <div class="form-text">Text f√ºr G√§ste mit mehreren Personen (ihr/euch/euer)</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Event-spezifische Texte -->
                                    <div class="row">
                                        <div class="col-12">
                                            <h6 class="text-secondary mb-3">
                                                <i class="bi bi-calendar-event me-2"></i>
                                                Event-spezifische Texte
                                            </h6>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <!-- Trauung Texte -->
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="eventTextTrauungSingular" class="form-label">
                                                    ü§µüë∞ Trauung (Singular)
                                                </label>
                                                <textarea class="form-control" id="eventTextTrauungSingular" rows="3" 
                                                    placeholder="ü§µüë∞ Sei dabei, wenn wir uns das Ja-Wort geben (Wei√üer Saal)"></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="eventTextTrauungPlural" class="form-label">
                                                    ü§µüë∞ Trauung (Plural)
                                                </label>
                                                <textarea class="form-control" id="eventTextTrauungPlural" rows="3" 
                                                    placeholder="ü§µüë∞ Seid dabei, wenn wir uns das Ja-Wort geben (Wei√üer Saal)"></textarea>
                                            </div>
                                        </div>
                                        
                                        <!-- Essen Texte -->
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="eventTextEssenSingular" class="form-label">
                                                    ü•Ç Essen (Singular)
                                                </label>
                                                <textarea class="form-control" id="eventTextEssenSingular" rows="3" 
                                                    placeholder="ü•Ç Genie√üe mit uns das Hochzeitsessen"></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="eventTextEssenPlural" class="form-label">
                                                    ü•Ç Essen (Plural)
                                                </label>
                                                <textarea class="form-control" id="eventTextEssenPlural" rows="3" 
                                                    placeholder="ü•Ç Genie√üt mit uns das Hochzeitsessen"></textarea>
                                            </div>
                                        </div>
                                        
                                        <!-- Party Texte -->
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="eventTextPartySingular" class="form-label">
                                                    üíÉüï∫ Party (Singular)
                                                </label>
                                                <textarea class="form-control" id="eventTextPartySingular" rows="3" 
                                                    placeholder="üíÉüï∫ Feiere und tanze mit uns bis in die fr√ºhen Morgenstunden"></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="eventTextPartyPlural" class="form-label">
                                                    üíÉüï∫ Party (Plural)
                                                </label>
                                                <textarea class="form-control" id="eventTextPartyPlural" rows="3" 
                                                    placeholder="üíÉüï∫ Feiert und tanzt mit uns bis in die fr√ºhen Morgenstunden"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Spezielle Hinweise -->
                                    <div class="row">
                                        <div class="col-12">
                                            <h6 class="text-secondary mb-3">
                                                <i class="bi bi-exclamation-triangle me-2"></i>
                                                Spezielle Hinweise
                                            </h6>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="specialNotesWeisserSaalSingular" class="form-label">
                                                    Wei√üer Saal Hinweis (Singular)
                                                </label>
                                                <textarea class="form-control" id="specialNotesWeisserSaalSingular" rows="4" 
                                                    placeholder="F√ºr die Trauung im Wei√üen Saal haben wir nur 42 Pl√§tze - einige davon werden reserviert sein, schau bitte vor Ort ob noch Platz f√ºr dich ist. Ansonsten laden wir dich herzlich ein mit der restlichen Gesellschaft vor dem Rathaus auf uns zu warten, auch dort wird es f√ºr niemanden langweilig werden."></textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="specialNotesWeisserSaalPlural" class="form-label">
                                                    Wei√üer Saal Hinweis (Plural)
                                                </label>
                                                <textarea class="form-control" id="specialNotesWeisserSaalPlural" rows="4" 
                                                    placeholder="F√ºr die Trauung im Wei√üen Saal haben wir nur 42 Pl√§tze - einige davon werden reserviert sein, schaut bitte vor Ort ob noch Platz f√ºr euch ist. Ansonsten laden wir euch herzlich ein mit der restlichen Gesellschaft vor dem Rathaus auf uns zu warten, auch dort wird es f√ºr niemanden langweilig werden."></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Test & Vorschau Buttons -->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <button type="button" class="btn btn-outline-info w-100" id="previewInvitationTexts">
                                                <i class="bi bi-eye me-2"></i>
                                                Texte Vorschau
                                            </button>
                                        </div>
                                        <div class="col-md-6">
                                            <button type="button" class="btn btn-outline-success w-100" id="testInvitationGeneration">
                                                <i class="bi bi-gear me-2"></i>
                                                Template-Test
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Legacy Hochzeitsort (wird ausgeblendet, aber f√ºr Kompatibilit√§t beibehalten) -->
                    <div class="row d-none">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hochzeitsort" class="form-label">Hochzeitsort (Legacy)</label>
                                <input type="text" class="form-control" id="hochzeitsort" placeholder="Location eingeben...">
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-end">
                        <button type="button" class="btn btn-secondary me-2" id="resetSettings">Zur√ºcksetzen</button>
                        <button type="submit" class="btn btn-primary">Speichern</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>Aktionen</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="/api/export/excel" class="btn btn-success">
                        <i class="bi bi-file-earmark-excel me-2"></i>Excel Export
                    </a>
                    
                    <button class="btn btn-warning" id="backupData">
                        <i class="bi bi-shield-check me-2"></i>Backup erstellen
                    </button>
                    
                    <button class="btn btn-info" id="importData">
                        <i class="bi bi-upload me-2"></i>Daten importieren
                    </button>
                    
                    <hr>
                    
                    <button class="btn btn-danger" id="resetAllData">
                        <i class="bi bi-exclamation-triangle me-2"></i>Alle Daten l√∂schen
                    </button>
                </div>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5>System Info</h5>
            </div>
            <div class="card-body">
                <small class="text-muted">
                    <strong>Version:</strong> 2.0.0 Web<br>
                    <strong>Letztes Update:</strong> <span id="lastUpdate">-</span><br>
                    <strong>G√§ste:</strong> <span id="totalGuests">-</span><br>
                    <strong>Budget Positionen:</strong> <span id="totalBudgetItems">-</span>
                </small>
            </div>
        </div>
    </div>
</div>

<!-- First Login Modal Vorschau - Einladungskarten Design -->
<div class="modal fade" id="firstLoginModalPreview" tabindex="-1" aria-labelledby="firstLoginModalPreviewLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);">
            <div class="modal-header bg-gradient-primary text-white border-0">
                <h4 class="modal-title fw-bold" id="firstLoginModalPreviewLabel">
                    <i class="bi bi-eye-fill me-2"></i>
                    Vorschau: Einladungskarte
                </h4>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0">
                <!-- Einladungskarte Design -->
                <div class="invitation-card text-center p-5" style="background: #ffffff; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
                    
                    <!-- Hochzeitsdatum oben -->
                    <div class="wedding-date mb-4">
                        <h3 id="previewWeddingDate" class="text-elegant mb-3" style="font-family: 'Playfair Display', serif; font-weight: 300; color: #8b7355; letter-spacing: 2px;">
                            25. Juli 2026
                        </h3>
                        <hr class="elegant-divider mx-auto" style="width: 150px; height: 2px; background: linear-gradient(90deg, transparent, #d4af37, transparent); border: none;">
                    </div>
                    
                    <!-- Foto Bereich -->
                    <div class="wedding-photo mb-4">
                        <div id="previewImageContainer">
                            <img id="previewImage" src="" alt="Hochzeitsfoto" class="img-fluid shadow-lg" 
                                 style="max-height: 300px; max-width: 100%; object-fit: cover; border-radius: 10px; border: 3px solid #f8f9fa; display: none;">
                            <div id="previewImagePlaceholder" class="photo-placeholder p-4" 
                                 style="background: linear-gradient(45deg, #f8f9fa, #e9ecef); border-radius: 10px; border: 2px dashed #d4af37;">
                                <i class="bi bi-heart-fill text-muted opacity-50" style="font-size: 4rem;"></i>
                                <p class="text-muted mt-2 mb-0">Hochzeitsfoto nicht konfiguriert</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Trennstrich unter dem Foto -->
                    <hr class="elegant-divider mx-auto mb-4" style="width: 150px; height: 2px; background: linear-gradient(90deg, transparent, #d4af37, transparent); border: none;">
                    
                    <!-- Ring Emoji -->
                    <div class="rings-emoji mb-4">
                        <span style="font-size: 2.5rem;">üíçüíç</span>
                    </div>
                    
                    <!-- Einladungstext -->
                    <div class="invitation-text">
                        <h4 class="text-elegant mb-3" style="font-family: 'Playfair Display', serif; font-weight: 400; color: #8b7355;">
                            üíï Pers√∂nliche Einladung üíí
                        </h4>
                        <div id="previewText" class="text-content mx-auto" 
                             style="font-family: 'Crimson Text', serif; font-size: 1.1rem; line-height: 1.8; color: #5a5a5a; max-width: 400px;">
                            <em class="text-muted">Text nicht konfiguriert</em>
                        </div>
                    </div>
                    
                    <!-- Hinweis f√ºr Admin -->
                    <div class="mt-4 p-3 bg-light rounded" style="border-left: 4px solid #d4af37;">
                        <small class="text-muted">
                            <i class="bi bi-info-circle me-1"></i>
                            Vorschau der Einladungskarte, die G√§ste beim ersten Login sehen
                        </small>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-light border-0 pt-4">
                <div class="d-flex justify-content-between align-items-center w-100">
                    <small class="text-muted">
                        <i class="bi bi-palette me-1"></i>
                        Design wird automatisch an Ihre Hochzeitsdaten angepasst
                    </small>
                    <button type="button" class="btn btn-elegant rounded-pill px-4" data-bs-dismiss="modal"
                            style="background: linear-gradient(135deg, #d4af37, #f4e4bc); border: none; color: #8b7355;">
                        <i class="bi bi-x-lg me-2"></i>
                        Schlie√üen
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/einstellungen.js') }}"></script>
{% endblock %}
